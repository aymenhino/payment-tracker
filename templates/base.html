<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Payment Tracker</title>

  <!-- Tailwind CDN (no build step) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { brand: { 50:"#eef2ff", 400:"#7c8bff", 500:"#5b6bff", 600:"#4a57e6" } }
        }
      }
    }
  </script>

  <link rel="icon" href="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f4b0.svg" />
</head>
<body class="min-h-screen flex flex-col bg-gray-100 text-gray-800 dark:bg-gray-950 dark:text-gray-100">
  <!-- NAV -->
  <header class="sticky top-0 z-20 bg-white/70 dark:bg-gray-900/70 backdrop-blur border-b border-gray-200 dark:border-gray-800">
    <div class="max-w-7xl mx-auto px-5 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-brand-500 to-fuchsia-500 shadow-md"></div>
        <span class="font-semibold text-lg">Payment Tracker</span>
      </div>
      <nav class="flex items-center gap-6">
        <a class="hover:text-brand-600 dark:hover:text-brand-400" href="{{ url_for('index') }}">Home</a>
        <a class="hover:text-brand-600 dark:hover:text-brand-400" href="{{ url_for('export_csv') }}">Export CSV</a>
        <a class="hover:text-brand-600 dark:hover:text-brand-400" href="{{ url_for('logout') }}">Logout</a>
        <button id="themeBtn" class="px-3 py-1.5 rounded-lg bg-brand-600 text-white shadow hover:bg-brand-500 transition">
          ðŸŒ™ Dark
        </button>
      </nav>
    </div>
  </header>

  <!-- CONTENT -->
  <main class="flex-1 w-full">
    <div class="max-w-7xl mx-auto px-5 py-8">
      {% block content %}{% endblock %}
    </div>
  </main>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-6 right-6 hidden px-4 py-3 rounded-lg bg-emerald-600 text-white shadow-lg">
    Saved âœ…
  </div>

  <script>
    // Theme toggle (persists in localStorage)
    const body = document.documentElement;
    const btn  = document.getElementById('themeBtn');
    function setTheme(mode){ body.classList.toggle('dark', mode==='dark'); localStorage.setItem('theme', mode); btn.textContent = mode==='dark' ? 'â˜€ï¸ Light' : 'ðŸŒ™ Dark'; }
    setTheme(localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'));
    btn.addEventListener('click', ()=> setTheme(body.classList.contains('dark') ? 'light' : 'dark'));

    // Small helper to show a toast
    window.showToast = function (msg='Saved âœ…') {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.remove('hidden','opacity-0');
      setTimeout(()=>t.classList.add('opacity-0'), 1200);
      setTimeout(()=>t.classList.add('hidden'), 1700);
    }
  </script>
</body>
</html>
